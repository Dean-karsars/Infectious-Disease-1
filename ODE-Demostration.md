deSolve Package:ODE Demostration
================

# 如何使用deSolve包中ode函数建立传染病模型

ode函数使用泛函编程的思想 - syntax: ode(y, times, func, parms) -
参数说明：y：常微分方程的初值；times：运行时间；
func：你自己写的常微分方程组（泛函编程的体现–ode会调用你的函数）；parms：func里面用到的参数 -
具体设置方法以及细节

``` r
library(deSolve)
```

    ## Warning: 程辑包'deSolve'是用R版本4.2.1 来建造的

``` r
corhort_model = function(time, state, parameters){ #注意，在设置自己的常微分方程时，time， state这两个参数是从ode()里面传递过来的，所以参数名不要改变
  with(as.list(c(state, parameters)),{
                  
                dI = -gamma * I
                dR = gamma * I
                return(list(c(dI, dR))) #注意，该函数的返回值需要明确设为list
          
  })
}
  
#在调用ode时，会将func的返回值作为下一个y
ode(
  y=c(I=1E6, R=0), #y为Named vector
  times = seq(from = 0, to = 4*7, by = 1),  #vector
  func = corhort_model,
  parms = c(gamma=0.1) #Named vector
)
```

    ##    time          I         R
    ## 1     0 1000000.00      0.00
    ## 2     1  904837.42  95162.58
    ## 3     2  818730.75 181269.25
    ## 4     3  740818.22 259181.78
    ## 5     4  670320.04 329679.96
    ## 6     5  606530.66 393469.34
    ## 7     6  548811.63 451188.37
    ## 8     7  496585.30 503414.70
    ## 9     8  449328.96 550671.04
    ## 10    9  406569.66 593430.34
    ## 11   10  367879.44 632120.56
    ## 12   11  332871.08 667128.92
    ## 13   12  301194.21 698805.79
    ## 14   13  272531.79 727468.21
    ## 15   14  246596.96 753403.04
    ## 16   15  223130.16 776869.84
    ## 17   16  201896.51 798103.49
    ## 18   17  182683.52 817316.48
    ## 19   18  165298.88 834701.12
    ## 20   19  149568.62 850431.38
    ## 21   20  135335.28 864664.72
    ## 22   21  122456.42 877543.58
    ## 23   22  110803.15 889196.85
    ## 24   23  100258.84 899741.16
    ## 25   24   90717.95 909282.05
    ## 26   25   82085.00 917915.00
    ## 27   26   74273.58 925726.42
    ## 28   27   67205.51 932794.49
    ## 29   28   60810.06 939189.94
